From abcdac5c43512dcf9e135c75afe8ababf5464182 Mon Sep 17 00:00:00 2001
From: Poncho <poncho@spahan.ch>
Date: Sat, 5 Feb 2022 16:40:21 +0100
Subject: [PATCH] src/Charts/PythonChart.cpp: allow
 LocalContentCanAccessRemoteUrls

new versions of qtwebengine block those requests by default

fix "Access to fetch at *** from origin 'file://' has been blocked by CORS policy:
   Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, chrome-untrusted, https."

see https://forum.qt.io/topic/132956/qwebengineview-javascript-fetch-cors-error-but-works-on-chrome-desktop
---
 src/Charts/PythonChart.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/Charts/PythonChart.cpp b/src/Charts/PythonChart.cpp
index 95c494244..64c63cc2a 100644
--- a/src/Charts/PythonChart.cpp
+++ b/src/Charts/PythonChart.cpp
@@ -448,6 +448,7 @@ PythonChart::setWeb(bool x)
         canvas->setSizePolicy(QSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding));
         // stop stealing focus!
         canvas->settings()->setAttribute(QWebEngineSettings::FocusOnNavigationEnabled, false);
+        canvas->settings()->setAttribute(QWebEngineSettings::LocalContentCanAccessRemoteUrls, true);
         renderlayout->insertWidget(0, canvas);
     }
 
-- 
2.34.1

