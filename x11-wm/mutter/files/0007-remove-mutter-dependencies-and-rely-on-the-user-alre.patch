From b4494d2df3cbbff3af1e85ce6e88a58bc13bd28e Mon Sep 17 00:00:00 2001
From: Tim Cuthbertson <tim@gfxmonk.net>
Date: Mon, 31 Oct 2011 21:41:47 +1100
Subject: [PATCH 07/12] remove mutter dependencies and rely on the user already running gnome-shell

---
 shellshape-mutter.xml |   20 +++++++++-----------
 1 files changed, 9 insertions(+), 11 deletions(-)

diff --git a/shellshape-mutter.xml b/shellshape-mutter.xml
index de15e9a..2df8a20 100644
--- a/shellshape-mutter.xml
+++ b/shellshape-mutter.xml
@@ -457,12 +457,15 @@ A: I have no comment on that.
 		<requires interface="http://gfxmonk.net/dist/0install/libcanberra-dev.xml"/>
 		<command name="compile" shell-command="cd &quot;$BUILDDIR&quot; &amp;&amp; ./autogen.sh --prefix=&quot;$DISTDIR&quot; &amp;&amp; make install">
 			<compile:implementation main="bin/mutter">
-				<requires interface="http://gfxmonk.net/dist/0install/control-center-filesystem.xml"/>
-				<requires interface="http://gfxmonk.net/dist/0install/startup-notification.xml"/>
-				<requires interface="http://gfxmonk.net/dist/0install/gconf2.xml"/>
-				<requires interface="http://gfxmonk.net/dist/0install/dbus-x11.xml"/>
-				<requires interface="http://gfxmonk.net/dist/0install/zenity.xml"/>
-				<environment insert="lib/pkgconfig" mode="prepend" name="PKG_CONFIG_PATH"/>
+				<!--
+				  These deps should work, but they're brittle, and we'll just assume you have mutter - so there's no need to declare them.
+				  <requires interface="http://gfxmonk.net/dist/0install/control-center-filesystem.xml"/>
+				  <requires interface="http://gfxmonk.net/dist/0install/startup-notification.xml"/>
+				  <requires interface="http://gfxmonk.net/dist/0install/gconf2.xml"/>
+				  <requires interface="http://gfxmonk.net/dist/0install/dbus-x11.xml"/>
+				  <requires interface="http://gfxmonk.net/dist/0install/zenity.xml"/>
+
+				-->				<environment insert="lib/pkgconfig" mode="prepend" name="PKG_CONFIG_PATH"/>
 				<environment insert="lib" mode="prepend" name="LD_LIBRARY_PATH"/>
 				<environment insert="lib/mutter" mode="prepend" name="GI_TYPELIB_PATH"/>
 				<environment insert="bin" mode="prepend" name="PATH"/>
@@ -478,11 +481,6 @@ A: I have no comment on that.
 	</group>
 	<!-- binary impls -->
 	<group arch="Linux-x86_64">
-		<requires interface="http://gfxmonk.net/dist/0install/control-center-filesystem.xml"/>
-		<requires interface="http://gfxmonk.net/dist/0install/startup-notification.xml"/>
-		<requires interface="http://gfxmonk.net/dist/0install/gconf2.xml"/>
-		<requires interface="http://gfxmonk.net/dist/0install/dbus-x11.xml"/>
-		<requires interface="http://gfxmonk.net/dist/0install/zenity.xml"/>
 		<environment insert="lib/pkgconfig" mode="prepend" name="PKG_CONFIG_PATH"/>
 		<environment insert="lib" mode="prepend" name="LD_LIBRARY_PATH"/>
 		<environment insert="lib/mutter" mode="prepend" name="GI_TYPELIB_PATH"/>
-- 
1.7.3.4

