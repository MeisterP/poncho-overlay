From 0769c08a8b5e55e7ce75ffc74cf69c63cd5fda61 Mon Sep 17 00:00:00 2001
From: Poncho <poncho@spahan.ch>
Date: Sat, 8 May 2021 09:56:38 +0200
Subject: [PATCH] garminexport/backup.py: use the same filename as garmin edge
 830

---
 garminexport/backup.py | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/garminexport/backup.py b/garminexport/backup.py
index 86348a2..959a4a9 100644
--- a/garminexport/backup.py
+++ b/garminexport/backup.py
@@ -4,7 +4,7 @@ import codecs
 import json
 import logging
 import os
-from datetime import datetime
+from datetime import datetime, timezone
 
 log = logging.getLogger(__name__)
 
@@ -43,9 +43,9 @@ def export_filename(activity, export_format):
     :return: The file name to use for the exported activity.
     :rtype: str
     """
-    fn = "{time}_{id}{suffix}".format(
-        id=activity[0],
-        time=activity[1].isoformat(),
+    time_local = activity[1].replace(tzinfo=timezone.utc).astimezone(tz=None)
+    fn = "{time}{suffix}".format(
+        time=time_local.strftime('%Y-%m-%d-%H-%M-%S'),
         suffix=format_suffix[export_format])
     return fn.replace(':', '_') if os.name == 'nt' else fn
 
-- 
2.26.3

