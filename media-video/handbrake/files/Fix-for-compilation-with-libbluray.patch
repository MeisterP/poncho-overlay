From: =?UTF-8?q?Rog=C3=A9rio=20Brito?= <rbrito@ime.usp.br>
Date: Fri, 1 Jun 2012 23:33:17 -0300
Subject: Fix for compilation with Debian's libbluray.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This patch puts dummy values in calls that the development versions of
HandBrake make to libbluray, as they use a different version of the library,
with a different API (this new one needs more arguments to use a finer
granularity selecting titles from the discs).

Note that the values that I put here are simply dummy values (zeros,
actually) that I can't test, as I don't have any bluray disc, let alone a
bluray drive.

Others should review this patch for unintended side-effects.

Signed-off-by: Rog√©rio Brito <rbrito@ime.usp.br>
---
 libhb/bd.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libhb/bd.c b/libhb/bd.c
index 782e2d5..9e2e412 100644
--- a/libhb/bd.c
+++ b/libhb/bd.c
@@ -51,7 +51,7 @@ hb_bd_t * hb_bd_init( char * path )
         goto fail;
     }
 
-    d->title_count = bd_get_titles( d->bd, TITLES_RELEVANT );
+    d->title_count = bd_get_titles( d->bd, 0, TITLES_RELEVANT );
     if ( d->title_count == 0 )
     {
         hb_log( "bd: not a bd - trying as a stream/file instead" );
@@ -60,7 +60,7 @@ hb_bd_t * hb_bd_init( char * path )
     d->title_info = calloc( sizeof( BLURAY_TITLE_INFO* ) , d->title_count );
     for ( ii = 0; ii < d->title_count; ii++ )
     {
-        d->title_info[ii] = bd_get_title_info( d->bd, ii );
+        d->title_info[ii] = bd_get_title_info( d->bd, ii, 0 );
     }
     qsort(d->title_info, d->title_count, sizeof( BLURAY_TITLE_INFO* ), title_info_compare_mpls );
     d->path = strdup( path );
-- 
1.7.10


